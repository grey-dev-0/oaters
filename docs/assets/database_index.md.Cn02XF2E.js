import{_ as a,c as t,o as n,a5 as r}from"./chunks/framework.MXlVYeMd.js";const u=JSON.parse('{"title":"Database Structure Documentation","description":"","frontmatter":{},"headers":[],"relativePath":"database/index.md","filePath":"database/index.md"}'),i={name:"database/index.md"};function o(s,e,l,d,c,m){return n(),t("div",null,e[0]||(e[0]=[r('<h1 id="database-structure-documentation" tabindex="-1">Database Structure Documentation <a class="header-anchor" href="#database-structure-documentation" aria-label="Permalink to &quot;Database Structure Documentation&quot;">​</a></h1><p>This section provides comprehensive visual documentation of the database structure for all modules in the Oaters system. Each diagram is automatically generated from the Laravel migrations and updated regularly.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The Oaters system uses a <strong>modular architecture</strong> powered by <a href="https://nwidart.com/laravel-modules/" target="_blank" rel="noreferrer">Laravel Modules</a> and implements <strong>multi-tenancy</strong> through <a href="https://tenancyforlaravel.com/" target="_blank" rel="noreferrer">Stancl Tenancy</a>. The database structure reflects this organization, with each module maintaining its own isolated data models while core tables support cross-module functionality.</p><h2 id="complete-database-schema" tabindex="-1">Complete Database Schema <a class="header-anchor" href="#complete-database-schema" aria-label="Permalink to &quot;Complete Database Schema&quot;">​</a></h2><p>View the complete database structure that includes all modules and their relationships:</p><p><a href="./database-diagram.html">Complete Database Diagram →</a></p><h2 id="module-specific-schemas" tabindex="-1">Module-Specific Schemas <a class="header-anchor" href="#module-specific-schemas" aria-label="Permalink to &quot;Module-Specific Schemas&quot;">​</a></h2><h3 id="saas-management-layer" tabindex="-1">SaaS Management Layer <a class="header-anchor" href="#saas-management-layer" aria-label="Permalink to &quot;SaaS Management Layer&quot;">​</a></h3><ul><li><strong><a href="./core-diagram.html">Core Database</a></strong> - Super admin management system for the SaaS platform, handling tenant registration, subscription management, module licensing, and multi-tenant data isolation</li></ul><h3 id="core-infrastructure" tabindex="-1">Core Infrastructure <a class="header-anchor" href="#core-infrastructure" aria-label="Permalink to &quot;Core Infrastructure&quot;">​</a></h3><ul><li><strong><a href="./sapphire-diagram.html">Sapphire Module</a></strong> - Centralized tenant and user management system providing authentication, authorization, multi-tenancy, and access control</li><li><strong><a href="./common-diagram.html">Common Module</a></strong> - Shared entities including countries, cities, contacts, timezones, and currencies used across all modules</li></ul><h3 id="business-modules" tabindex="-1">Business Modules <a class="header-anchor" href="#business-modules" aria-label="Permalink to &quot;Business Modules&quot;">​</a></h3><ul><li><strong><a href="./ruby-diagram.html">Ruby Module</a></strong> - Human Resource management system handling employee records, payroll, attendance, leave management, and recruitment workflows</li><li><strong><a href="./onyx-diagram.html">Onyx Module</a></strong> - Production and product line management for manufacturing operations, inventory tracking, and production workflow optimization</li><li><strong><a href="./amethyst-diagram.html">Amethyst Module</a></strong> - E-commerce platform and online store for selling products and services with integrated shopping cart, payment processing, and order management</li><li><strong><a href="./emerald-diagram.html">Emerald Module</a></strong> - Project management for task assignment, progress tracking, team coordination, and project delivery oversight</li><li><strong><a href="./article-diagram.html">Article Module</a></strong> - Content management system with articles, categories, and properties</li></ul><h4 id="modules-in-development" tabindex="-1">Modules In Development <a class="header-anchor" href="#modules-in-development" aria-label="Permalink to &quot;Modules In Development&quot;">​</a></h4><ul><li><strong>Topaz Module</strong> - Financial management and analysis system featuring accounting, budgeting, financial reporting, and comprehensive business analytics (database schema coming soon)</li></ul><h2 id="database-design-principles" tabindex="-1">Database Design Principles <a class="header-anchor" href="#database-design-principles" aria-label="Permalink to &quot;Database Design Principles&quot;">​</a></h2><h3 id="multi-tenancy-architecture" tabindex="-1">Multi-Tenancy Architecture <a class="header-anchor" href="#multi-tenancy-architecture" aria-label="Permalink to &quot;Multi-Tenancy Architecture&quot;">​</a></h3><p>Each module respects the Stancl Tenancy configuration:</p><ul><li><strong>Tenant-specific tables</strong> are prefixed by module codes (e.g., <code>lc_*</code> for Common, <code>la_*</code> for Article)</li><li><strong>Core tables</strong> (prefixed with <code>s_*</code>) are shared across all tenants</li><li><strong>Isolation</strong> ensures data privacy and security for different clients</li></ul><h3 id="naming-conventions" tabindex="-1">Naming Conventions <a class="header-anchor" href="#naming-conventions" aria-label="Permalink to &quot;Naming Conventions&quot;">​</a></h3><p>Tables follow a consistent naming pattern to indicate their module:</p><ul><li><code>lc_*</code> - Common module tables</li><li><code>la_*</code> - Article module tables</li><li><code>le_*</code> - Commerce module tables</li><li><code>s_*</code> - Sapphire/Core system tables</li></ul><h3 id="relationship-types" tabindex="-1">Relationship Types <a class="header-anchor" href="#relationship-types" aria-label="Permalink to &quot;Relationship Types&quot;">​</a></h3><p>The diagrams show foreign key relationships using Mermaid ERD notation:</p><ul><li><strong>||--o{</strong> indicates a one-to-many relationship</li><li>Relationship labels show the foreign key column name for clarity</li></ul><h2 id="how-to-update-diagrams" tabindex="-1">How to Update Diagrams <a class="header-anchor" href="#how-to-update-diagrams" aria-label="Permalink to &quot;How to Update Diagrams&quot;">​</a></h2><p>To regenerate database diagrams after adding new migrations:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:generate-diagrams</span></span></code></pre></div><p>This command will:</p><ol><li>Scan all migrations in <code>Modules/*/Database/migrations/</code> and <code>database/migrations/</code></li><li>Parse <code>Schema::create</code> and foreign key definitions</li><li>Generate Mermaid ERD diagrams for each module</li><li>Create a comprehensive diagram of all tables</li></ol><p><strong>Output Directory:</strong> <code>docs/database/</code></p><h2 id="database-statistics" tabindex="-1">Database Statistics <a class="header-anchor" href="#database-statistics" aria-label="Permalink to &quot;Database Statistics&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Module</th><th>Tables</th><th>Key Features</th></tr></thead><tbody><tr><td>Sapphire</td><td>7 tables</td><td>User management, authentication, roles, permissions</td></tr><tr><td>Common</td><td>13 tables</td><td>Countries, cities, contacts, timezones, currencies</td></tr><tr><td>Ruby</td><td>15+ tables</td><td>Employees, payroll, attendance, leaves, departments</td></tr><tr><td>Onyx</td><td>Varies</td><td>Production management, inventory, workflows</td></tr><tr><td>Amethyst</td><td>Varies</td><td>Shopping cart, orders, product management</td></tr><tr><td>Topaz</td><td>Varies</td><td>Accounting, budgeting, financial reporting</td></tr><tr><td>Emerald</td><td>Varies</td><td>Projects, tasks, team coordination</td></tr><tr><td>Article</td><td>8 tables</td><td>Articles, categories, properties, options</td></tr></tbody></table><h2 id="related-documentation" tabindex="-1">Related Documentation <a class="header-anchor" href="#related-documentation" aria-label="Permalink to &quot;Related Documentation&quot;">​</a></h2><ul><li><a href="./../development/frontend-architecture.html">Frontend Architecture</a> - How the frontend interacts with the database layer</li><li><a href="./../development/getting-started-frontend.html">Getting Started - Frontend</a> - Frontend development guide</li></ul>',36)]))}const p=a(i,[["render",o]]);export{u as __pageData,p as default};
