import{_ as a,c as i,o as s,a5 as l}from"./chunks/framework.MXlVYeMd.js";const u=JSON.parse('{"title":"Lava Common Modules","description":"","frontmatter":{},"headers":[],"relativePath":"modules/lava-common.md","filePath":"modules/lava-common.md"}'),n={name:"modules/lava-common.md"};function t(o,e,r,p,c,d){return s(),i("div",null,e[0]||(e[0]=[l(`<h1 id="lava-common-modules" tabindex="-1">Lava Common Modules <a class="header-anchor" href="#lava-common-modules" aria-label="Permalink to &quot;Lava Common Modules&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The <strong>Lava</strong> framework comprises three foundational common modules that integrate and provide shared functionality across the OATERS system. These modules are designed to work together, providing essential entities and utilities used by all business modules (Ruby, Onyx, Amethyst, Topaz, and Emerald).</p><p><strong>Lava Modules:</strong></p><ul><li><strong>Article</strong> (LA) - Content management and product catalog</li><li><strong>Commerce</strong> (LE) - E-commerce transactions and financial operations</li><li><strong>Common</strong> (LC) - General purpose entities: contacts, addresses, colors, and geographic information</li></ul><blockquote><p><strong>Note</strong>: &quot;Lava&quot; is a framework module that precedes and integrates with the gemstone-based business modules.</p></blockquote><h2 id="module-architecture" tabindex="-1">Module Architecture <a class="header-anchor" href="#module-architecture" aria-label="Permalink to &quot;Module Architecture&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌───────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│          LAVA COMMON FRAMEWORK                    │</span></span>
<span class="line"><span>├───────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│  Article (LA)    │  Commerce (LE)  │  Common(LC)  │</span></span>
<span class="line"><span>└───────────────────────────────────────────────────┘</span></span>
<span class="line"><span>         ↓                ↓                 ↓</span></span>
<span class="line"><span>┌───────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│    BUSINESS MODULES (Built on Lava)               │</span></span>
<span class="line"><span>├───────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│ Ruby (R)  │ Onyx (O)  │ Amethyst (A)  │ Topaz (T) │</span></span>
<span class="line"><span>│ Emerald (E)  │ Sapphire (S) Authentication        │</span></span>
<span class="line"><span>└───────────────────────────────────────────────────┘</span></span></code></pre></div><h2 id="article-module-la-content-catalog" tabindex="-1">Article Module (LA) - Content &amp; Catalog <a class="header-anchor" href="#article-module-la-content-catalog" aria-label="Permalink to &quot;Article Module (LA) - Content &amp; Catalog&quot;">​</a></h2><h3 id="purpose" tabindex="-1">Purpose <a class="header-anchor" href="#purpose" aria-label="Permalink to &quot;Purpose&quot;">​</a></h3><p>Manages articles, products, and their properties. Provides a flexible system for storing and organizing content with multi-language support and customizable attributes.</p><h3 id="core-features" tabindex="-1">Core Features <a class="header-anchor" href="#core-features" aria-label="Permalink to &quot;Core Features&quot;">​</a></h3><ol><li><p><strong>Articles</strong> (<code>la_articles</code>)</p><ul><li>Base article/product records</li><li>Type classification (type field)</li><li>Timestamps for created/updated tracking</li></ul></li><li><p><strong>Article Locales</strong> (<code>la_article_locales</code>)</p><ul><li>Multi-language support for articles</li><li>Title and description in multiple locales</li><li>Locale-specific content management</li></ul></li><li><p><strong>Categories</strong> (<code>la_categories</code>)</p><ul><li>Hierarchical organization of articles</li><li>Multi-language category names</li></ul></li><li><p><strong>Properties &amp; Options</strong></p><ul><li>Dynamic properties system for articles</li><li>Type-based property classification</li><li>Public/system property flags</li><li>Multi-language property names</li></ul></li><li><p><strong>Article-Category Mapping</strong> (<code>la_article_categories</code>)</p><ul><li>Many-to-many relationship</li><li>Articles can belong to multiple categories</li></ul></li></ol><h3 id="database-schema" tabindex="-1">Database Schema <a class="header-anchor" href="#database-schema" aria-label="Permalink to &quot;Database Schema&quot;">​</a></h3><h4 id="core-models" tabindex="-1">Core Models <a class="header-anchor" href="#core-models" aria-label="Permalink to &quot;Core Models&quot;">​</a></h4><p><strong>Article Model</strong> (<code>Article.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Base articles/products with type classification</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_articles</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>type: Article type classification (tinyInteger)</li><li>created_at, updated_at: Timestamps</li></ul><p>Relationships:</p><ul><li><code>translations()</code>: hasMany(ArticleLocale)</li><li><code>categories()</code>: belongsToMany(Category, &#39;la_article_categories&#39;)</li></ul><p><strong>ArticleLocale Model</strong> (<code>ArticleLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Multi-language article content</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_article_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>article_id: Foreign key to articles</li><li>title: Article title (string)</li><li>description: Article description (text)</li><li>locale: Language code (2 chars)</li></ul><p>Relationships:</p><ul><li><code>article()</code>: belongsTo(Article)</li></ul><p><strong>Category Model</strong> (<code>Category.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Article categorization system</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_categories</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>created_at, updated_at: Timestamps</li></ul><p>Relationships:</p><ul><li><code>translations()</code>: hasMany(CategoryLocale)</li><li><code>articles()</code>: belongsToMany(Article, &#39;la_article_categories&#39;)</li></ul><p><strong>CategoryLocale Model</strong> (<code>CategoryLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Multi-language category names</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_category_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>category_id: Foreign key to categories</li><li>title: Category title (string)</li><li>description: Category description (text)</li><li>locale: Language code (2 chars)</li></ul><p>Relationships:</p><ul><li><code>category()</code>: belongsTo(Category)</li></ul><p><strong>Property Model</strong> (<code>Property.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Dynamic article properties system</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_properties</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>type: Property type (tinyInteger)</li><li>public: Public visibility flag (boolean, default true)</li><li>system: System property flag (boolean, default false)</li></ul><p>Relationships:</p><ul><li><code>translations()</code>: hasMany(PropertyLocale)</li><li><code>options()</code>: belongsToMany(Option, &#39;la_property_options&#39;)</li></ul><p><strong>PropertyLocale Model</strong> (<code>PropertyLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Multi-language property names</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_property_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>property_id: Foreign key to properties</li><li>name: Property name (string)</li><li>locale: Language code (2 chars)</li></ul><p>Relationships:</p><ul><li><code>property()</code>: belongsTo(Property)</li></ul><p><strong>Option Model</strong> (<code>Option.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Property value options</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_options</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li></ul><p>Relationships:</p><ul><li><code>translations()</code>: hasMany(OptionLocale)</li><li><code>properties()</code>: belongsToMany(Property, &#39;la_property_options&#39;)</li></ul><p><strong>OptionLocale Model</strong> (<code>OptionLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Multi-language option names</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_option_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>option_id: Foreign key to options</li><li>name: Option name (string)</li><li>locale: Language code (2 chars)</li></ul><p>Relationships:</p><ul><li><code>option()</code>: belongsTo(Option)</li></ul><p><strong>ArticleCategory Model</strong> (<code>ArticleCategory.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Article-Category pivot table</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_article_categories</span></span></code></pre></div><p>Schema:</p><ul><li>article_id: Primary key, foreign key to articles</li><li>category_id: Primary key, foreign key to categories</li></ul><p><strong>PropertyOption Model</strong> (<code>PropertyOption.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Property-Option pivot table</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: la_property_options</span></span></code></pre></div><p>Schema:</p><ul><li>property_id: Primary key, foreign key to properties</li><li>option_id: Primary key, foreign key to options</li></ul><h3 id="use-cases" tabindex="-1">Use Cases <a class="header-anchor" href="#use-cases" aria-label="Permalink to &quot;Use Cases&quot;">​</a></h3><ul><li>Product catalog management</li><li>Blog articles and documentation</li><li>Dynamic product specifications</li><li>Multi-language content organization</li></ul><h2 id="commerce-module-le-transactions-commerce" tabindex="-1">Commerce Module (LE) - Transactions &amp; Commerce <a class="header-anchor" href="#commerce-module-le-transactions-commerce" aria-label="Permalink to &quot;Commerce Module (LE) - Transactions &amp; Commerce&quot;">​</a></h2><h3 id="purpose-1" tabindex="-1">Purpose <a class="header-anchor" href="#purpose-1" aria-label="Permalink to &quot;Purpose&quot;">​</a></h3><p>Handles e-commerce operations including orders, payments, refunds, and financial transactions. Integrates with Contact module for customer information and Article module for product references.</p><h3 id="core-features-1" tabindex="-1">Core Features <a class="header-anchor" href="#core-features-1" aria-label="Permalink to &quot;Core Features&quot;">​</a></h3><ol><li><p><strong>Bank Accounts</strong> (<code>le_bank_accounts</code>)</p><ul><li>Contact-associated bank account information</li><li>IBAN, SWIFT codes, account numbers</li><li>Multiple accounts per contact</li></ul></li><li><p><strong>Orders</strong> (<code>le_orders</code>)</p><ul><li>Customer orders with contact reference</li><li>Shipping and billing addresses</li><li>Order amount and payment status</li><li>Delivery tracking</li></ul></li><li><p><strong>Order Lines</strong> (<code>le_order_lines</code>)</p><ul><li>Individual items within orders</li><li>Links to articles (from Article module)</li><li>Quantity, units, and pricing</li><li>Discount support (fixed or percentage)</li></ul></li><li><p><strong>Refunds</strong> (<code>le_refunds</code>)</p><ul><li>Polymorphic refund tracking</li><li>Refund amount and status</li><li>Return date tracking</li></ul></li><li><p><strong>Order History</strong> (<code>le_order_histories</code>)</p><ul><li>Event-based order tracking</li><li>Timeline of order changes</li></ul></li><li><p><strong>Transactions</strong> (<code>le_transactions</code>)</p><ul><li>Financial transaction records</li><li>Debit/credit tracking</li><li>Polymorphic transaction support</li></ul></li></ol><h3 id="database-schema-1" tabindex="-1">Database Schema <a class="header-anchor" href="#database-schema-1" aria-label="Permalink to &quot;Database Schema&quot;">​</a></h3><h4 id="core-models-1" tabindex="-1">Core Models <a class="header-anchor" href="#core-models-1" aria-label="Permalink to &quot;Core Models&quot;">​</a></h4><p><strong>BankAccount Model</strong> (<code>BankAccount.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Bank account information for contacts</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: le_bank_accounts</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>contact_id: Foreign key to contacts</li><li>bank: Bank name (string)</li><li>name: Account holder name (string)</li><li>number: Account number (string)</li><li>iban: IBAN code (string, nullable)</li><li>swift: SWIFT code (string)</li><li>created_at, updated_at: Timestamps</li></ul><p>Relationships:</p><ul><li><code>contact()</code>: belongsTo(Contact) from Common module</li></ul><p><strong>Order Model</strong> (<code>Order.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Customer orders and purchase records</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: le_orders</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>contact_id: Foreign key to contacts (nullable - guest orders)</li><li>shipping_address_id: Foreign key to addresses (nullable)</li><li>billing_address_id: Foreign key to addresses (nullable)</li><li>amount: Total order amount (float)</li><li>paid: Payment status (boolean, default false)</li><li>delivered_at: Delivery timestamp (nullable)</li><li>created_at, updated_at: Timestamps</li></ul><p>Relationships:</p><ul><li><code>contact()</code>: belongsTo(Contact)</li><li><code>shippingAddress()</code>: belongsTo(Address)</li><li><code>billingAddress()</code>: belongsTo(Address)</li><li><code>lines()</code>: hasMany(OrderLine)</li><li><code>history()</code>: hasMany(OrderHistory)</li></ul><p><strong>OrderLine Model</strong> (<code>OrderLine.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Individual items within orders</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: le_order_lines</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>order_id: Foreign key to orders</li><li>article_id: Foreign key to articles (from Article module)</li><li>quantity: Ordered quantity (float)</li><li>quantity_unit: Unit of measurement (10 chars - kg, l, units, etc.)</li><li>price: Unit price (float)</li><li>discount: Discount amount (float)</li><li>discount_type: Discount type (enum: fixed|percent)</li></ul><p>Relationships:</p><ul><li><code>order()</code>: belongsTo(Order)</li><li><code>article()</code>: belongsTo(Article) from Article module</li></ul><p><strong>Refund Model</strong> (<code>Refund.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Polymorphic refund tracking system</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: le_refunds</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>refundable_id: Polymorphic foreign key</li><li>refundable_type: Polymorphic type (30 chars)</li><li>amount: Refund amount (float)</li><li>paid: Refund payment status (boolean, default false)</li><li>returned_at: Return timestamp (nullable)</li><li>created_at, updated_at: Timestamps</li></ul><p>Relationships:</p><ul><li><code>refundable()</code>: morphTo() - Can refund orders, order lines, etc.</li></ul><p><strong>OrderHistory Model</strong> (<code>OrderHistory.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Audit trail of order events and status changes</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: le_order_histories</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>order_id: Foreign key to orders</li><li>event: Event description (text)</li><li>time: Event timestamp</li><li>created_at: Record creation time (nullable)</li></ul><p>Relationships:</p><ul><li><code>order()</code>: belongsTo(Order)</li></ul><p><strong>Transaction Model</strong> (<code>Transaction.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Financial transaction records</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: le_transactions</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>transferable_id: Polymorphic foreign key</li><li>transferable_type: Polymorphic type (30 chars)</li><li>type: Transaction type (enum: debit|credit)</li><li>amount: Transaction amount (float)</li><li>created_at: Transaction timestamp (nullable)</li></ul><p>Relationships:</p><ul><li><code>transferable()</code>: morphTo() - Can be associated with orders, refunds, etc.</li></ul><p><strong>Currency Model</strong> (<code>Currency.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Currency definitions for countries</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: le_currencies</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>name: Currency name (string)</li><li>code: Currency code (10 chars)</li><li>symbol: Currency symbol (25 chars)</li><li>format: Display format (50 chars)</li><li>exchange_rate: Exchange rate (string)</li><li>active: Active status (boolean, default false)</li><li>created_at, updated_at: Timestamps</li></ul><p>Relationships:</p><ul><li><code>countries()</code>: hasMany(Country) from Common module</li></ul><h3 id="use-cases-1" tabindex="-1">Use Cases <a class="header-anchor" href="#use-cases-1" aria-label="Permalink to &quot;Use Cases&quot;">​</a></h3><ul><li>E-commerce order management</li><li>Payment and refund processing</li><li>Customer financial records</li><li>Transaction audit trails</li></ul><h2 id="common-module-lc-general-purpose-entities" tabindex="-1">Common Module (LC) - General Purpose Entities <a class="header-anchor" href="#common-module-lc-general-purpose-entities" aria-label="Permalink to &quot;Common Module (LC) - General Purpose Entities&quot;">​</a></h2><h3 id="purpose-2" tabindex="-1">Purpose <a class="header-anchor" href="#purpose-2" aria-label="Permalink to &quot;Purpose&quot;">​</a></h3><p>Manages general purpose entities including contacts, addresses, colors, and geographic information. Serves as the central repository for contacts, addresses, and location data used across all modules.</p><h3 id="core-features-2" tabindex="-1">Core Features <a class="header-anchor" href="#core-features-2" aria-label="Permalink to &quot;Core Features&quot;">​</a></h3><ol><li><p><strong>Contacts</strong> (<code>lc_contacts</code>)</p><ul><li>Core contact entity</li><li>Links to Sapphire users</li><li>Personal information (name, job, image)</li><li>Gender, marital status, birthdate</li><li>Timezone association</li></ul></li><li><p><strong>Phones</strong> (<code>lc_phones</code>)</p><ul><li>Multiple phone numbers per contact</li><li>Default phone flag</li><li>Up to 16-digit support</li></ul></li><li><p><strong>Emails</strong> (<code>lc_emails</code>)</p><ul><li>Multiple email addresses per contact</li><li>Default email designation</li><li>Unique email tracking</li></ul></li><li><p><strong>Addresses</strong> (<code>lc_addresses</code>)</p><ul><li>Multiple addresses per contact</li><li>Country and city association</li><li>Used for shipping/billing in Commerce module</li></ul></li><li><p><strong>Geographic Data</strong></p><ul><li>Countries with currency association</li><li>Cities with country hierarchy</li><li>Timezone information</li><li>Country-timezone mappings</li></ul></li><li><p><strong>Colors</strong> (<code>lc_colors</code>)</p><ul><li>System color definitions</li><li>Multi-language color names</li><li>Used for UI theming and categorization</li></ul></li></ol><h3 id="database-schema-2" tabindex="-1">Database Schema <a class="header-anchor" href="#database-schema-2" aria-label="Permalink to &quot;Database Schema&quot;">​</a></h3><h4 id="core-models-2" tabindex="-1">Core Models <a class="header-anchor" href="#core-models-2" aria-label="Permalink to &quot;Core Models&quot;">​</a></h4><p><strong>Contact Model</strong> (<code>Contact.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Base contact entity for all person-related data</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_contacts</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uses Spatie Roles trait for permission management</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>user_id: Foreign key to Sapphire users (nullable)</li><li>timezone_id: Foreign key to timezones (nullable)</li><li>name: Contact name (string)</li><li>job: Job title (string)</li><li>image: Profile image (nullable)</li><li>gender: Gender (enum: male|female|other, nullable)</li><li>marital_status: Marital status code (tinyInteger, nullable)</li><li>birthdate: Birth date (nullable)</li><li>created_at, updated_at: Timestamps</li></ul><p>Relationships:</p><ul><li><code>phones()</code>: hasMany(Phone)</li><li><code>emails()</code>: hasMany(Email)</li><li><code>addresses()</code>: hasMany(Address)</li><li><code>user()</code>: belongsTo(User) from Sapphire module</li><li><code>timezone()</code>: belongsTo(Timezone)</li><li><code>roles()</code>: belongsToMany(Role) - Spatie Permission</li></ul><p><strong>Phone Model</strong> (<code>Phone.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Contact phone numbers</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_phones</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>contact_id: Foreign key to contacts</li><li>number: Phone number (16 chars max)</li><li>default: Default phone flag (boolean)</li></ul><p>Relationships:</p><ul><li><code>contact()</code>: belongsTo(Contact)</li></ul><p><strong>Email Model</strong> (<code>Email.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Contact email addresses</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_emails</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>contact_id: Foreign key to contacts</li><li>address: Email address (string)</li><li>default: Default email flag (boolean)</li></ul><p>Relationships:</p><ul><li><code>contact()</code>: belongsTo(Contact)</li></ul><p><strong>Address Model</strong> (<code>Address.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Contact addresses with geographic location</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_addresses</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>contact_id: Foreign key to contacts</li><li>country_id: Foreign key to countries</li></ul><p>Relationships:</p><ul><li><code>contact()</code>: belongsTo(Contact)</li><li><code>country()</code>: belongsTo(Country)</li></ul><p><strong>Country Model</strong> (<code>Country.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Country definitions with translations</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_countries</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uses Astrotomic Translatable</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>currency_id: Foreign key to currencies (nullable)</li><li>code: Country code (3 chars)</li><li>status: Active status (boolean)</li></ul><p>Relationships:</p><ul><li><code>translations()</code>: hasMany(CountryLocale)</li><li><code>currency()</code>: belongsTo(Currency)</li><li><code>cities()</code>: hasMany(City)</li><li><code>addresses()</code>: hasMany(Address)</li><li><code>timezones()</code>: belongsToMany(Timezone, &#39;lc_country_timezones&#39;)</li></ul><p><strong>CountryLocale Model</strong> (<code>CountryLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Multi-language country names</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_country_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>country_id: Foreign key to countries</li><li>name: Country name (string)</li><li>locale: Language code (2 chars)</li></ul><p>Relationships:</p><ul><li><code>country()</code>: belongsTo(Country)</li></ul><p><strong>City Model</strong> (<code>City.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// City definitions with translations</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_cities</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uses Astrotomic Translatable</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>country_id: Foreign key to countries</li><li>status: Active status (boolean)</li></ul><p>Relationships:</p><ul><li><code>translations()</code>: hasMany(CityLocale)</li><li><code>country()</code>: belongsTo(Country)</li></ul><p><strong>CityLocale Model</strong> (<code>CityLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Multi-language city names</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_city_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>city_id: Foreign key to cities</li><li>name: City name (string)</li><li>locale: Language code (2 chars)</li></ul><p>Relationships:</p><ul><li><code>city()</code>: belongsTo(City)</li></ul><p><strong>Timezone Model</strong> (<code>Timezone.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Timezone definitions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_timezones</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>identifier: Timezone identifier (string - e.g., &quot;Europe/London&quot;)</li></ul><p>Relationships:</p><ul><li><code>countries()</code>: belongsToMany(Country, &#39;lc_country_timezones&#39;)</li><li><code>contacts()</code>: hasMany(Contact)</li></ul><p><strong>Color Model</strong> (<code>Color.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// System color definitions with translations</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_colors</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uses Astrotomic Translatable</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (varchar 6 - hex color code)</li></ul><p>Relationships:</p><ul><li><code>translations()</code>: hasMany(ColorLocale)</li></ul><p><strong>ColorLocale Model</strong> (<code>ColorLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Multi-language color names</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: lc_color_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (increments)</li><li>color_id: Foreign key to colors</li><li>name: Color name (string)</li><li>locale: Language code (2 chars)</li></ul><p>Relationships:</p><ul><li><code>color()</code>: belongsTo(Color)</li></ul><h2 id="key-relationships" tabindex="-1">Key Relationships <a class="header-anchor" href="#key-relationships" aria-label="Permalink to &quot;Key Relationships&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// Article Module Relationships</span></span>
<span class="line"><span>Article (1) ─────── (N) ArticleLocale</span></span>
<span class="line"><span>Article (N) ─────── (N) Category (via ArticleCategory pivot)</span></span>
<span class="line"><span>Category (1) ─────── (N) CategoryLocale</span></span>
<span class="line"><span>Property (1) ─────── (N) PropertyLocale</span></span>
<span class="line"><span>Property (N) ─────── (N) Option (via PropertyOption pivot)</span></span>
<span class="line"><span>Option (1) ─────── (N) OptionLocale</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Commerce Module Relationships</span></span>
<span class="line"><span>Contact (Common) (1) ─────── (N) BankAccount</span></span>
<span class="line"><span>Contact (1) ─────── (N) Order</span></span>
<span class="line"><span>Address (Common) (1) ─────── (N) Order (shipping/billing addresses)</span></span>
<span class="line"><span>Order (1) ─────── (N) OrderLine</span></span>
<span class="line"><span>Order (1) ─────── (N) OrderHistory</span></span>
<span class="line"><span>Article (Article) (1) ─────── (N) OrderLine</span></span>
<span class="line"><span>Currency (1) ─────── (N) Country (Common)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Polymorphic Relationships (Commerce)</span></span>
<span class="line"><span>Refund (N) ─────── (1) Order|OrderLine (polymorphic: refundable)</span></span>
<span class="line"><span>Transaction (N) ─────── (1) Order|Refund (polymorphic: transferable)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Common Module Relationships</span></span>
<span class="line"><span>User (Sapphire) (1) ─────── (1) Contact (nullable)</span></span>
<span class="line"><span>Timezone (1) ─────── (N) Contact</span></span>
<span class="line"><span>Contact (1) ─────── (N) Phone</span></span>
<span class="line"><span>Contact (1) ─────── (N) Email</span></span>
<span class="line"><span>Contact (1) ─────── (N) Address</span></span>
<span class="line"><span>Country (1) ─────── (N) Address</span></span>
<span class="line"><span>Country (1) ─────── (N) City</span></span>
<span class="line"><span>Country (N) ─────── (N) Timezone (via CountryTimezone pivot)</span></span>
<span class="line"><span>Country (1) ─────── (N) CountryLocale</span></span>
<span class="line"><span>City (1) ─────── (N) CityLocale</span></span>
<span class="line"><span>Color (1) ─────── (N) ColorLocale</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Cross-Module Integration</span></span>
<span class="line"><span>Contact (Common) (N) ─────── (N) Role (Spatie Permission)</span></span>
<span class="line"><span>Contact ─────── Ruby Module (Employee relationships)</span></span>
<span class="line"><span>Contact ─────── Commerce Module (Customer relationships)</span></span>
<span class="line"><span>User (Sapphire) ─────── Contact (Common) (profile extension)</span></span></code></pre></div><h3 id="use-cases-2" tabindex="-1">Use Cases <a class="header-anchor" href="#use-cases-2" aria-label="Permalink to &quot;Use Cases&quot;">​</a></h3><ul><li>User profile management</li><li>Customer and vendor contact databases</li><li>Geographic location tracking</li><li>Multi-language support for locations</li><li>Communication channel management</li></ul><h2 id="inter-module-integration" tabindex="-1">Inter-Module Integration <a class="header-anchor" href="#inter-module-integration" aria-label="Permalink to &quot;Inter-Module Integration&quot;">​</a></h2><h3 id="article-↔-commerce" tabindex="-1">Article ↔ Commerce <a class="header-anchor" href="#article-↔-commerce" aria-label="Permalink to &quot;Article ↔ Commerce&quot;">​</a></h3><ul><li><strong>Relationship</strong>: Orders reference Articles through order lines</li><li><strong>Purpose</strong>: Track which products are sold in orders</li><li><strong>Flow</strong>: Products defined in Article → Sold through Commerce orders</li></ul><h3 id="commerce-↔-contact" tabindex="-1">Commerce ↔ Contact <a class="header-anchor" href="#commerce-↔-contact" aria-label="Permalink to &quot;Commerce ↔ Contact&quot;">​</a></h3><ul><li><strong>Relationship</strong>: Orders linked to Contacts; addresses from Contact used for billing/shipping</li><li><strong>Purpose</strong>: Customer order management and delivery</li><li><strong>Flow</strong>: Customers (Contacts) → Place orders → Shipped to Contact addresses</li></ul><h3 id="all-modules-↔-contact" tabindex="-1">All Modules ↔ Contact <a class="header-anchor" href="#all-modules-↔-contact" aria-label="Permalink to &quot;All Modules ↔ Contact&quot;">​</a></h3><ul><li><strong>Relationship</strong>: Contacts serve as central entity for all person-related data</li><li><strong>Purpose</strong>: Unified contact repository</li><li><strong>Integration Points</strong>: <ul><li>Ruby: Employees are Contacts</li><li>Sapphire: Users linked to Contacts</li><li>Commerce: Customers are Contacts</li></ul></li></ul><h2 id="key-characteristics" tabindex="-1">Key Characteristics <a class="header-anchor" href="#key-characteristics" aria-label="Permalink to &quot;Key Characteristics&quot;">​</a></h2><h3 id="multi-language-support" tabindex="-1">Multi-Language Support <a class="header-anchor" href="#multi-language-support" aria-label="Permalink to &quot;Multi-Language Support&quot;">​</a></h3><ul><li>All text-based entities have locale-specific tables</li><li>Supports multiple languages without data duplication</li><li>Used in Article categories, properties, countries, cities, and colors</li></ul><h3 id="polymorphic-relationships" tabindex="-1">Polymorphic Relationships <a class="header-anchor" href="#polymorphic-relationships" aria-label="Permalink to &quot;Polymorphic Relationships&quot;">​</a></h3><ul><li>Refunds can apply to multiple entities</li><li>Transactions can be associated with various transferable types</li><li>Provides flexibility for future integrations</li></ul><h3 id="geographic-hierarchy" tabindex="-1">Geographic Hierarchy <a class="header-anchor" href="#geographic-hierarchy" aria-label="Permalink to &quot;Geographic Hierarchy&quot;">​</a></h3><ul><li>Countries → Cities hierarchy</li><li>Timezone associations at country level</li><li>Currency support per country</li></ul><h3 id="extensibility" tabindex="-1">Extensibility <a class="header-anchor" href="#extensibility" aria-label="Permalink to &quot;Extensibility&quot;">​</a></h3><ul><li>Dynamic properties system in Article module</li><li>Type-based classification for articles and properties</li><li>Flag-based system/public distinction for properties</li></ul><h2 id="development-guidelines" tabindex="-1">Development Guidelines <a class="header-anchor" href="#development-guidelines" aria-label="Permalink to &quot;Development Guidelines&quot;">​</a></h2><h3 id="when-to-use-each-module" tabindex="-1">When to Use Each Module <a class="header-anchor" href="#when-to-use-each-module" aria-label="Permalink to &quot;When to Use Each Module&quot;">​</a></h3><p><strong>Article Module:</strong></p><ul><li>Product/content storage and organization</li><li>Dynamic product specifications</li><li>Multi-language content management</li></ul><p><strong>Commerce Module:</strong></p><ul><li>E-commerce transactions</li><li>Order and refund management</li><li>Financial transaction tracking</li></ul><p><strong>Common Module:</strong></p><ul><li>Contact and address management</li><li>Geographic data and color definitions</li><li>Communication channel tracking</li></ul><h3 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h3><ol><li><strong>Always use Contact for person-related data</strong> - Don&#39;t duplicate contact information</li><li><strong>Leverage multi-language support</strong> - Use locale tables for multi-language content</li><li><strong>Use polymorphic relationships</strong> - Provide flexibility for future feature additions</li><li><strong>Maintain geographic hierarchy</strong> - Validate city-country relationships</li><li><strong>Track financial transactions</strong> - Use transaction tables for audit trails</li></ol><h2 id="database-setup" tabindex="-1">Database Setup <a class="header-anchor" href="#database-setup" aria-label="Permalink to &quot;Database Setup&quot;">​</a></h2><p>The Lava common modules are automatically migrated when the <code>CentralAppSeeder</code> runs:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:seed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --class=CentralAppSeeder</span></span></code></pre></div><p>This creates all necessary tables for Article, Commerce, and Common modules in the central database.</p><h2 id="future-enhancements" tabindex="-1">Future Enhancements <a class="header-anchor" href="#future-enhancements" aria-label="Permalink to &quot;Future Enhancements&quot;">​</a></h2><ul><li><strong>Article Module</strong>: Media attachment support, versioning system</li><li><strong>Commerce Module</strong>: Advanced inventory management, subscription support</li><li><strong>Contact Module</strong>: Enhanced geographic search, bulk import/export tools</li></ul><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">​</a></h2><ul><li><a href="/oaters/modules/ruby.html">Ruby Module</a> - HR management using Contact entities</li><li><a href="/oaters/modules/sapphire.html">Sapphire Module</a> - User management linking to Contacts</li><li><a href="/oaters/development/getting-started-frontend.html">Frontend Guide</a> - Building interfaces with these modules</li></ul>`,235)]))}const g=a(n,[["render",t]]);export{u as __pageData,g as default};
