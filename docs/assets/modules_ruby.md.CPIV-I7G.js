import{_ as s,c as n,o as i,a5 as e}from"./chunks/framework.MXlVYeMd.js";const g=JSON.parse('{"title":"Ruby Module","description":"","frontmatter":{},"headers":[],"relativePath":"modules/ruby.md","filePath":"modules/ruby.md"}'),t={name:"modules/ruby.md"};function l(p,a,o,r,c,h){return i(),n("div",null,a[0]||(a[0]=[e(`<h1 id="ruby-module" tabindex="-1">Ruby Module <a class="header-anchor" href="#ruby-module" aria-label="Permalink to &quot;Ruby Module&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p><strong>Ruby</strong> is the Human Resource management module of the OATERS ERP system. It provides comprehensive HR functionality including employee management, payroll processing, attendance tracking, leave management, recruitment, and organizational structure management. Ruby heavily integrates with the <strong>Common module</strong> for contact management and employee information.</p><h2 id="business-functionality" tabindex="-1">Business Functionality <a class="header-anchor" href="#business-functionality" aria-label="Permalink to &quot;Business Functionality&quot;">​</a></h2><h3 id="core-features" tabindex="-1">Core Features <a class="header-anchor" href="#core-features" aria-label="Permalink to &quot;Core Features&quot;">​</a></h3><h4 id="_1-employee-management" tabindex="-1">1. Employee Management <a class="header-anchor" href="#_1-employee-management" aria-label="Permalink to &quot;1. Employee Management&quot;">​</a></h4><ul><li><strong>Employee Profiles</strong>: Complete employee information via Common module Contact integration</li><li><strong>Department Organization</strong>: Organize employees by departments with hierarchical structure</li><li><strong>Document Management</strong>: Store and manage employee/applicant documents</li><li><strong>Reporting Relationships</strong>: Define manager-subordinate hierarchies within departments</li></ul><h4 id="_2-payroll-management" tabindex="-1">2. Payroll Management <a class="header-anchor" href="#_2-payroll-management" aria-label="Permalink to &quot;2. Payroll Management&quot;">​</a></h4><ul><li><strong>Salary Structure</strong>: Define salary types (hourly, monthly, annual)</li><li><strong>Payment Components</strong>: Manage earnings, allowances, and incentives</li><li><strong>Payroll Processing</strong>: Calculate and process payroll payments</li><li><strong>Component Tracking</strong>: Track individual salary components per employee</li><li><strong>Multi-language Support</strong>: Payroll component names in multiple languages</li></ul><h4 id="_3-attendance-time-tracking" tabindex="-1">3. Attendance &amp; Time Tracking <a class="header-anchor" href="#_3-attendance-time-tracking" aria-label="Permalink to &quot;3. Attendance &amp; Time Tracking&quot;">​</a></h4><ul><li><strong>Punch In/Out</strong>: Record employee check-in and check-out times</li><li><strong>Attendance Records</strong>: Track employee presence with timestamp tracking</li><li><strong>Simple Time Tracking</strong>: Streamlined punch system with in/out types</li></ul><h4 id="_4-leave-management" tabindex="-1">4. Leave Management <a class="header-anchor" href="#_4-leave-management" aria-label="Permalink to &quot;4. Leave Management&quot;">​</a></h4><ul><li><strong>Leave Applications</strong>: Submit and manage leave requests</li><li><strong>Leave Types</strong>: Support for various leave categories (sick, annual, casual)</li><li><strong>Leave Status</strong>: Approve or reject leave applications</li><li><strong>Date Range Tracking</strong>: Track leave start and end dates</li></ul><h4 id="_5-recruitment-management" tabindex="-1">5. Recruitment Management <a class="header-anchor" href="#_5-recruitment-management" aria-label="Permalink to &quot;5. Recruitment Management&quot;">​</a></h4><ul><li><strong>Job Vacancies</strong>: Post and manage job openings by department</li><li><strong>Vacancy Localization</strong>: Multi-language job titles and descriptions</li><li><strong>Applicant Tracking</strong>: Manage job applications with contact integration</li><li><strong>Applicant Documents</strong>: Store resumes, certificates, and related files</li><li><strong>Recruitment Pipeline</strong>: Track candidates through hiring process</li></ul><h4 id="_6-organizational-structure" tabindex="-1">6. Organizational Structure <a class="header-anchor" href="#_6-organizational-structure" aria-label="Permalink to &quot;6. Organizational Structure&quot;">​</a></h4><ul><li><strong>Department Management</strong>: Create and manage organizational departments</li><li><strong>Department Localization</strong>: Multi-language department names</li><li><strong>Degree/Position Management</strong>: Define job titles and educational requirements</li><li><strong>Hierarchical Structure</strong>: Build complex organizational charts with manager-employee relationships</li><li><strong>Department Heads</strong>: Automatically identify department leadership</li></ul><h4 id="_7-notices-communications" tabindex="-1">7. Notices &amp; Communications <a class="header-anchor" href="#_7-notices-communications" aria-label="Permalink to &quot;7. Notices &amp; Communications&quot;">​</a></h4><ul><li><strong>Company Notices</strong>: Broadcast announcements to employees</li><li><strong>Notice Types</strong>: Support for notices, warnings, and terminations</li><li><strong>Targeted Communications</strong>: Send notices to specific employees</li><li><strong>Payroll-Linked Notices</strong>: Associate notices with payroll payments</li></ul><h2 id="technical-architecture" tabindex="-1">Technical Architecture <a class="header-anchor" href="#technical-architecture" aria-label="Permalink to &quot;Technical Architecture&quot;">​</a></h2><h3 id="technology-stack" tabindex="-1">Technology Stack <a class="header-anchor" href="#technology-stack" aria-label="Permalink to &quot;Technology Stack&quot;">​</a></h3><ul><li><strong>Framework</strong>: Laravel 10+</li><li><strong>Module System</strong>: nwidart/laravel-modules (^10.0)</li><li><strong>Localization</strong>: astrotomic/laravel-translatable (^11.12)</li><li><strong>Permission System</strong>: spatie/laravel-permission (^6.4) - via Contact model</li><li><strong>Multi-tenancy</strong>: Tenant-scoped data via Sapphire module</li><li><strong>Database</strong>: MySQL/PostgreSQL (tenant-specific)</li><li><strong>Authentication</strong>: Integrated with Sapphire module</li></ul><h2 id="database-schema" tabindex="-1">Database Schema <a class="header-anchor" href="#database-schema" aria-label="Permalink to &quot;Database Schema&quot;">​</a></h2><h3 id="core-models" tabindex="-1">Core Models <a class="header-anchor" href="#core-models" aria-label="Permalink to &quot;Core Models&quot;">​</a></h3><p><strong>Department Model</strong> (<code>Department.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Organizational departments with hierarchical support</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_departments</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uses Translatable trait from Astrotomic</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>created_at, updated_at</li></ul><p>Translated Attributes (via r_department_locales):</p><ul><li>name: Department name (localized)</li></ul><p>Relationships:</p><ul><li><code>managers()</code>: belongsToMany(Contact) via <code>r_subordinates</code> pivot</li><li><code>employees()</code>: belongsToMany(Contact) via <code>r_subordinates</code> pivot</li><li><code>head()</code>: Complex query to find department heads (managers with no superiors)</li><li><code>staff()</code>: hasMany(Subordinate) - for counting members</li><li><code>subordinates()</code>: hasMany(Subordinate) - direct pivot access</li><li><code>applicants()</code>: morphToMany(Applicant) via <code>r_applicables</code></li><li><code>vacancies()</code>: hasMany(Vacancy)</li></ul><p>Features:</p><ul><li>Hierarchical department structure</li><li>Automatic department head detection</li><li>Staff member aggregation including managers and employees</li></ul><p><strong>DepartmentLocale Model</strong> (<code>DepartmentLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Localized department information</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_department_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>department_id: Foreign key to departments</li><li>locale: Language code (2 chars)</li><li>name: Translated department name</li></ul><p><strong>Degree Model</strong> (<code>Degree.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Job positions/titles and educational qualifications</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_degrees</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uses Translatable trait</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>No timestamps</li></ul><p>Translated Attributes (via r_degree_locales):</p><ul><li>name: Position/degree name (localized)</li></ul><p>Relationships:</p><ul><li><code>applicants()</code>: hasMany(Applicant)</li></ul><p><strong>DegreeLocale Model</strong> (<code>DegreeLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Localized degree/position information</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_degree_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>degree_id: Foreign key to degrees</li><li>locale: Language code (2 chars)</li><li>name: Translated degree/position name</li></ul><p><strong>Salary Model</strong> (<code>Salary.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Employee salary records</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_salaries</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Primary key is the Contact ID (shared primary key pattern)</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (references lc_contacts.id)</li><li>type: enum(&#39;hourly&#39;, &#39;monthly&#39;, &#39;annual&#39;)</li><li>created_at, updated_at</li></ul><p>Foreign Keys:</p><ul><li>id → lc_contacts.id (cascade on update/delete)</li></ul><p>Note: Currently a minimal implementation - ready for expansion</p><p><strong>SalaryComponent Model</strong> (<code>SalaryComponent.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Individual salary component values per employee</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_salary_components</span></span></code></pre></div><p>Schema:</p><ul><li>salary_id: Part of composite primary key</li><li>payroll_component_id: Part of composite primary key</li><li>amount: Component monetary value (float)</li></ul><p>Relationships:</p><ul><li><code>salary()</code>: belongsTo(Salary)</li><li><code>payrollComponent()</code>: belongsTo(PayrollComponent)</li></ul><p><strong>PayrollComponent Model</strong> (<code>PayrollComponent.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Salary component definitions (allowances, deductions, incentives)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_payroll_components</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>type: enum(&#39;basic&#39;, &#39;allowance&#39;, &#39;incentive&#39;)</li><li>No timestamps</li></ul><p>Translated Attributes (via r_payroll_component_locales):</p><ul><li>title: Component name (localized)</li></ul><p><strong>PayrollComponentLocale Model</strong> (<code>PayrollComponentLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Localized payroll component information</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_payroll_component_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>payroll_component_id: Foreign key</li><li>locale: Language code (2 chars)</li><li>title: Translated component name</li></ul><p><strong>PaymentComponent Model</strong> (<code>PaymentComponent.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Payment processing components for payroll</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_payment_components</span></span></code></pre></div><p>Schema:</p><ul><li>payroll_payment_id: Part of composite primary key</li><li>payroll_component_id: Part of composite primary key</li><li>amount: Payment amount (float)</li></ul><p>Relationships:</p><ul><li><code>payrollPayment()</code>: belongsTo(PayrollPayment)</li><li><code>payrollComponent()</code>: belongsTo(PayrollComponent)</li></ul><p><strong>PayrollPayment Model</strong> (<code>PayrollPayment.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Payroll payment records and disbursements</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_payroll_payments</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>salary_id: Foreign key to salaries (nullable, set null on delete)</li><li>bank_account_id: Foreign key to bank accounts (nullable)</li><li>units: Number of payment units (default 1, tinyint)</li><li>paid_at: Payment timestamp (nullable)</li><li>created_at, updated_at</li></ul><p>Relationships:</p><ul><li><code>salary()</code>: belongsTo(Salary)</li><li><code>bankAccount()</code>: belongsTo(BankAccount) - from financial module</li><li><code>paymentComponents()</code>: hasMany(PaymentComponent)</li></ul><p><strong>Punch Model</strong> (<code>Punch.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Attendance punch records (check-in/check-out)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_punches</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (bigint)</li><li>contact_id: Foreign key to contacts</li><li>type: enum(&#39;in&#39;, &#39;out&#39;)</li><li>created_at: Timestamp (no updated_at)</li></ul><p>Relationships:</p><ul><li><code>contact()</code>: belongsTo(Contact) from Common module</li></ul><p>Features:</p><ul><li>Simplified punch tracking</li><li>Records timestamp on creation</li><li>Type indicates check-in or check-out</li></ul><p><strong>Leave Model</strong> (<code>Leave.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Leave applications and tracking</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_leaves</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>contact_id: Foreign key to contacts</li><li>type: enum(&#39;sick&#39;, &#39;casual&#39;, &#39;annual&#39;)</li><li>status: boolean (nullable) - true=approved, false=rejected, null=pending</li><li>starts_at: Leave start date</li><li>ends_at: Leave end date</li><li>created_at, updated_at</li></ul><p>Casts:</p><ul><li>starts_at, ends_at: datetime</li></ul><p>Relationships:</p><ul><li><code>contact()</code>: belongsTo(Contact) from Common module</li></ul><p><strong>Vacancy Model</strong> (<code>Vacancy.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Job openings and positions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_vacancies</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>department_id: Foreign key to departments</li><li>active: boolean (default false)</li><li>created_at, updated_at</li></ul><p>Translated Attributes (via r_vacancy_locales):</p><ul><li>title: Job title (localized)</li><li>description: Job description (localized)</li></ul><p>Relationships:</p><ul><li><code>department()</code>: belongsTo(Department)</li><li><code>applicants()</code>: morphToMany(Applicant) via <code>r_applicables</code></li></ul><p><strong>VacancyLocale Model</strong> (<code>VacancyLocale.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Localized vacancy information</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_vacancy_locales</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>vacancy_id: Foreign key to vacancies</li><li>locale: Language code (2 chars)</li><li>title: Translated job title</li><li>description: Translated job description (text)</li></ul><p><strong>Applicant Model</strong> (<code>Applicant.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Job applicants and recruitment candidates</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_applicants</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Primary key is the Contact ID (shared primary key pattern)</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (references lc_contacts.id, non-incrementing)</li><li>country_id: Foreign key to countries (nationality)</li><li>degree_id: Foreign key to degrees (educational qualification)</li><li>degree_date: Year of degree completion (unsigned int)</li><li>tenure: Years of experience (tinyint)</li><li>recruited_at: Recruitment timestamp (nullable)</li><li>created_at, updated_at</li></ul><p>Casts:</p><ul><li>recruited_at: datetime</li></ul><p>Relationships:</p><ul><li><code>contact()</code>: belongsTo(Contact, &#39;id&#39;) - one-to-one with Contact</li><li><code>documents()</code>: hasMany(Document)</li><li><code>nationality()</code>: belongsTo(Country) from Common module</li><li><code>degree()</code>: belongsTo(Degree)</li><li><code>vacancies()</code>: morphedByMany(Vacancy) via <code>r_applicables</code></li><li><code>departments()</code>: morphedByMany(Department) via <code>r_applicables</code></li></ul><p>Features:</p><ul><li>Applicant shares ID with Contact (no separate user needed)</li><li>Can be recruited (recruited_at timestamp)</li><li>Links to multiple vacancies and departments via polymorphic relation</li></ul><p><strong>Document Model</strong> (<code>Document.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Employee and applicant documents (resumes, certificates, etc.)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_documents</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>applicant_id: Foreign key to applicants</li><li>title: Document title/name</li><li>filename: Stored filename</li><li>created_at, updated_at</li></ul><p>Relationships:</p><ul><li><code>applicant()</code>: belongsTo(Applicant)</li></ul><p>Accessors:</p><ul><li><code>download_url</code>: Generates route for document download</li></ul><p><strong>Subordinate Model</strong> (<code>Subordinate.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Employee reporting relationships within departments</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_subordinates</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Connects managers, employees, and departments</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key (string UUID from uuid_short(), non-incrementing)</li><li>manager_id: Foreign key to contacts (nullable, set null on delete)</li><li>contact_id: Foreign key to contacts (nullable, set null on delete)</li><li>department_id: Foreign key to departments (required)</li><li>Unique constraint on (manager_id, contact_id)</li><li>Timestamps</li></ul><p>Relationships:</p><ul><li><code>manager()</code>: belongsTo(Contact, &#39;manager_id&#39;)</li><li><code>contact()</code>: belongsTo(Contact, &#39;contact_id&#39;)</li><li><code>department()</code>: belongsTo(Department)</li></ul><p>Features:</p><ul><li><strong>Three-way relationship</strong>: Links manager, employee, and department</li><li>Either manager_id or contact_id (or both) can be null</li><li>Allows flexible organizational hierarchies</li><li>Used to build department staff lists and reporting chains</li></ul><p><strong>Notice Model</strong> (<code>Notice.php</code>)</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Company announcements and HR notices</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Table: r_notices</span></span></code></pre></div><p>Schema:</p><ul><li>id: Primary key</li><li>author_id: Foreign key to contacts (who created the notice)</li><li>contact_id: Foreign key to contacts (recipient, nullable)</li><li>payroll_payment_id: Foreign key to payroll payments (nullable)</li><li>type: enum(&#39;notice&#39;, &#39;warning&#39;, &#39;termination&#39;)</li><li>content: Notice text (text field)</li><li>created_at, updated_at</li></ul><p>Relationships:</p><ul><li><code>author()</code>: belongsTo(Contact, &#39;author_id&#39;)</li><li><code>contact()</code>: belongsTo(Contact, &#39;contact_id&#39;) - recipient</li><li><code>payrollPayment()</code>: belongsTo(PayrollPayment)</li></ul><h2 id="directory-structure" tabindex="-1">Directory Structure <a class="header-anchor" href="#directory-structure" aria-label="Permalink to &quot;Directory Structure&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Modules/Ruby/</span></span>
<span class="line"><span>├── App/</span></span>
<span class="line"><span>│   ├── Http/</span></span>
<span class="line"><span>│   │   └── Controllers/</span></span>
<span class="line"><span>│   │       ├── AttendanceController.php</span></span>
<span class="line"><span>│   │       ├── ContactController.php</span></span>
<span class="line"><span>│   │       ├── DashboardController.php</span></span>
<span class="line"><span>│   │       ├── DepartmentController.php</span></span>
<span class="line"><span>│   │       ├── DocumentController.php</span></span>
<span class="line"><span>│   │       └── ModuleController.php</span></span>
<span class="line"><span>│   ├── Models/                   # Eloquent models (19 models)</span></span>
<span class="line"><span>│   │   ├── Applicant.php</span></span>
<span class="line"><span>│   │   ├── Degree.php</span></span>
<span class="line"><span>│   │   ├── DegreeLocale.php</span></span>
<span class="line"><span>│   │   ├── Department.php</span></span>
<span class="line"><span>│   │   ├── DepartmentLocale.php</span></span>
<span class="line"><span>│   │   ├── Document.php</span></span>
<span class="line"><span>│   │   ├── Leave.php</span></span>
<span class="line"><span>│   │   ├── Notice.php</span></span>
<span class="line"><span>│   │   ├── PaymentComponent.php</span></span>
<span class="line"><span>│   │   ├── PayrollComponent.php</span></span>
<span class="line"><span>│   │   ├── PayrollComponentLocale.php</span></span>
<span class="line"><span>│   │   ├── PayrollPayment.php</span></span>
<span class="line"><span>│   │   ├── Punch.php</span></span>
<span class="line"><span>│   │   ├── Salary.php</span></span>
<span class="line"><span>│   │   ├── SalaryComponent.php</span></span>
<span class="line"><span>│   │   ├── Subordinate.php</span></span>
<span class="line"><span>│   │   ├── Vacancy.php</span></span>
<span class="line"><span>│   │   └── VacancyLocale.php</span></span>
<span class="line"><span>│   └── Providers/</span></span>
<span class="line"><span>│       └── ModuleServiceProvider.php</span></span>
<span class="line"><span>├── Database/</span></span>
<span class="line"><span>│   ├── Factories/               # Model factories for testing</span></span>
<span class="line"><span>│   ├── migrations/              # Database migrations</span></span>
<span class="line"><span>│   │   └── 2024_04_02_104117_ruby_base.php</span></span>
<span class="line"><span>│   └── Seeders/                # Database seeders</span></span>
<span class="line"><span>├── resources/</span></span>
<span class="line"><span>│   ├── views/</span></span>
<span class="line"><span>│   │   └── components/         # Reusable UI components</span></span>
<span class="line"><span>│   └── lang/                   # Translations</span></span>
<span class="line"><span>│       └── en/</span></span>
<span class="line"><span>├── routes/</span></span>
<span class="line"><span>│   ├── web.php                 # Web routes</span></span>
<span class="line"><span>│   └── api.php                 # API routes</span></span>
<span class="line"><span>├── config/</span></span>
<span class="line"><span>│   └── config.php              # Module configuration</span></span>
<span class="line"><span>└── module.json                 # Module metadata</span></span></code></pre></div><h2 id="key-relationships" tabindex="-1">Key Relationships <a class="header-anchor" href="#key-relationships" aria-label="Permalink to &quot;Key Relationships&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Contact (Common) (1) ─────── (1) Salary</span></span>
<span class="line"><span>Contact (1) ─────── (N) Punch (Attendance)</span></span>
<span class="line"><span>Contact (1) ─────── (N) Leave</span></span>
<span class="line"><span>Contact (1) ─────── (N) Notices (as author)</span></span>
<span class="line"><span>Contact (1) ─────── (N) Notices (as recipient)</span></span>
<span class="line"><span>Contact (1) ─────── (1) Applicant (shared primary key)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Department (1) ─────── (N) Vacancies</span></span>
<span class="line"><span>Department (1) ─────── (N) Subordinates</span></span>
<span class="line"><span>Department (1) ─────── (N) DepartmentLocale</span></span>
<span class="line"><span>Department (N) ─────── (N) Contacts (via r_subordinates) - managers</span></span>
<span class="line"><span>Department (N) ─────── (N) Contacts (via r_subordinates) - employees</span></span>
<span class="line"><span>Department (N) ─────── (N) Applicants (via r_applicables polymorphic)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Degree (1) ─────── (N) Applicants</span></span>
<span class="line"><span>Degree (1) ─────── (N) DegreeLocale</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Salary (1) ─────── (N) SalaryComponent</span></span>
<span class="line"><span>Salary (1) ─────── (N) PayrollPayment</span></span>
<span class="line"><span></span></span>
<span class="line"><span>PayrollComponent (1) ─────── (N) SalaryComponent</span></span>
<span class="line"><span>PayrollComponent (1) ─────── (N) PaymentComponent</span></span>
<span class="line"><span>PayrollComponent (1) ─────── (N) PayrollComponentLocale</span></span>
<span class="line"><span></span></span>
<span class="line"><span>PayrollPayment (1) ─────── (N) PaymentComponent</span></span>
<span class="line"><span>PayrollPayment (1) ─────── (N) Notices</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Vacancy (1) ─────── (N) VacancyLocale</span></span>
<span class="line"><span>Vacancy (N) ─────── (N) Applicants (via r_applicables polymorphic)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Applicant (1) ─────── (N) Documents</span></span>
<span class="line"><span>Applicant (N) ─────── (1) Contact (shared ID)</span></span>
<span class="line"><span>Applicant (N) ─────── (1) Country (nationality)</span></span>
<span class="line"><span>Applicant (N) ─────── (1) Degree</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Subordinate (N) ─────── (1) Contact (as manager)</span></span>
<span class="line"><span>Subordinate (N) ─────── (1) Contact (as employee)</span></span>
<span class="line"><span>Subordinate (N) ─────── (1) Department</span></span></code></pre></div><h2 id="integration-with-common-module" tabindex="-1">Integration with Common Module <a class="header-anchor" href="#integration-with-common-module" aria-label="Permalink to &quot;Integration with Common Module&quot;">​</a></h2><p>Ruby module heavily depends on the <strong>Common module</strong> for contact management:</p><h3 id="contact-model-from-common-module" tabindex="-1">Contact Model (from Common module) <a class="header-anchor" href="#contact-model-from-common-module" aria-label="Permalink to &quot;Contact Model (from Common module)&quot;">​</a></h3><p>The Contact model (<code>Modules\\Common\\App\\Models\\Contact</code>) is the central entity for:</p><ul><li>Employee information (names, personal details)</li><li>Communication details (phones, emails)</li><li>Addresses</li><li>Role assignments (via Spatie Permission)</li></ul><h3 id="key-contact-relationships-used-by-ruby" tabindex="-1">Key Contact Relationships Used by Ruby: <a class="header-anchor" href="#key-contact-relationships-used-by-ruby" aria-label="Permalink to &quot;Key Contact Relationships Used by Ruby:&quot;">​</a></h3><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// From Common module Contact model</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Contact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::class</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">departments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Employee&#39;s departments</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">managed_departments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Departments they manage</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">superiors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Their managers</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subordinates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Their direct reports</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">applicant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Recruitment information</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">leaves</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Leave history</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Permission checks</span></span></code></pre></div><h3 id="contact-scopes-used-by-ruby" tabindex="-1">Contact Scopes Used by Ruby: <a class="header-anchor" href="#contact-scopes-used-by-ruby" aria-label="Permalink to &quot;Contact Scopes Used by Ruby:&quot;">​</a></h3><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Useful query scopes from Contact</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Contact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withRoles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Load roles with translations</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Contact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withDefaultInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Load primary phone/email</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Contact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withAllInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Load all contact information</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Contact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withRecruitmentDetails</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Load applicant info</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Contact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">activeRecruit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Only hired employees</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Contact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withDepartments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Load department relationships</span></span></code></pre></div><h2 id="integration-with-sapphire-module" tabindex="-1">Integration with Sapphire Module <a class="header-anchor" href="#integration-with-sapphire-module" aria-label="Permalink to &quot;Integration with Sapphire Module&quot;">​</a></h2><p>Ruby integrates with Sapphire for:</p><ol><li><strong>Authentication</strong>: User authentication and session management</li><li><strong>Authorization</strong>: Permission checks via Spatie Permission (inherited by Contact)</li><li><strong>Tenant Context</strong>: All data is automatically scoped to current tenant</li></ol><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Modules\\Sapphire\\App\\Models\\User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get authenticated user</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get user&#39;s contact for HR operations</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$contact </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contact;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Check HR permissions</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ($contact</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">can</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;manage-employees&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // HR management logic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="organizational-hierarchy" tabindex="-1">Organizational Hierarchy <a class="header-anchor" href="#organizational-hierarchy" aria-label="Permalink to &quot;Organizational Hierarchy&quot;">​</a></h2><p>The Ruby module implements a flexible three-tier hierarchy:</p><ol><li><strong>Departments</strong>: Organizational units</li><li><strong>Subordinates</strong>: Pivot table linking managers, employees, and departments</li><li><strong>Contacts</strong>: Individual people (managers and employees)</li></ol><h3 id="how-it-works" tabindex="-1">How It Works: <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works:&quot;">​</a></h3><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Add an employee to a department with a manager</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Subordinate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;department_id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $dept</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;contact_id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $employee</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;manager_id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $manager</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Add a department head (no manager)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Subordinate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;department_id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $dept</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;manager_id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $head</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;contact_id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Managers don&#39;t need contact_id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get department staff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$department</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">staff;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Returns all managers and employees</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get department head</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$department</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">head;   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Returns top-level managers</span></span></code></pre></div><h2 id="recruitment-workflow" tabindex="-1">Recruitment Workflow <a class="header-anchor" href="#recruitment-workflow" aria-label="Permalink to &quot;Recruitment Workflow&quot;">​</a></h2><ol><li><strong>Create Vacancy</strong>: Post job opening for a department</li><li><strong>Receive Applications</strong>: Applicants (linked to Contacts) apply via polymorphic relation</li><li><strong>Document Upload</strong>: Store resumes, certificates via Document model</li><li><strong>Recruitment</strong>: Set <code>recruited_at</code> timestamp on Applicant</li><li><strong>Onboarding</strong>: Recruited applicants become employees via Subordinate relationship</li></ol><h2 id="api-endpoints" tabindex="-1">API Endpoints <a class="header-anchor" href="#api-endpoints" aria-label="Permalink to &quot;API Endpoints&quot;">​</a></h2><h3 id="implemented-controllers" tabindex="-1">Implemented Controllers: <a class="header-anchor" href="#implemented-controllers" aria-label="Permalink to &quot;Implemented Controllers:&quot;">​</a></h3><ul><li><strong>AttendanceController</strong>: Punch in/out functionality</li><li><strong>ContactController</strong>: Employee contact management</li><li><strong>DashboardController</strong>: HR dashboard and statistics</li><li><strong>DepartmentController</strong>: Department CRUD operations</li><li><strong>DocumentController</strong>: Document upload/download</li><li><strong>ModuleController</strong>: Module-specific settings</li></ul><h3 id="pending-implementation" tabindex="-1">Pending Implementation: <a class="header-anchor" href="#pending-implementation" aria-label="Permalink to &quot;Pending Implementation:&quot;">​</a></h3><ul><li>Salary management</li><li>Payroll processing</li><li>Leave approval workflow</li><li>Vacancy management</li><li>Applicant tracking</li><li>Notice distribution</li></ul><h2 id="development-notes" tabindex="-1">Development Notes <a class="header-anchor" href="#development-notes" aria-label="Permalink to &quot;Development Notes&quot;">​</a></h2><ul><li><strong>Priority</strong>: 8</li><li><strong>Alias</strong>: ruby</li><li><strong>Service Provider</strong>: <code>Modules\\Ruby\\App\\Providers\\ModuleServiceProvider</code></li><li><strong>Dependencies</strong>: <ul><li><strong>Common module</strong> (primary - for Contact management)</li><li><strong>Sapphire module</strong> (authentication/authorization)</li></ul></li><li><strong>Required Packages</strong>: astrotomic/laravel-translatable, spatie/laravel-permission</li></ul><h2 id="future-enhancements" tabindex="-1">Future Enhancements <a class="header-anchor" href="#future-enhancements" aria-label="Permalink to &quot;Future Enhancements&quot;">​</a></h2><p>Based on the current minimal implementation, planned expansions include:</p><ol><li><strong>Payroll System</strong>: Full payroll calculation engine</li><li><strong>Leave Approval</strong>: Multi-level approval workflow</li><li><strong>Performance Reviews</strong>: Employee evaluation system</li><li><strong>Training Management</strong>: Track employee training and certifications</li><li><strong>Shift Management</strong>: Work schedule and shift assignments</li><li><strong>Time Off Requests</strong>: Integrated leave request system</li><li><strong>Onboarding Workflow</strong>: Automated new hire processes</li><li><strong>Exit Management</strong>: Employee offboarding procedures</li></ol>`,179)]))}const k=s(t,[["render",l]]);export{g as __pageData,k as default};
