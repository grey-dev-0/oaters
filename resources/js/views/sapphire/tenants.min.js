(function(){var a=Vue.createApp({data:function(){return{emitter:null,openUser:{id:0,name:null}}},methods:{renderAmount:function(a){return"$"+a},renderExecuted:function(a){return a==1?locale.common.yes:locale.common.no},renderPaidAt:function(a){return a["executed"]==1?a["updated_at"]:locale.common.unpaid},onDatatableDraw:function(){$("#tenants-table").find(".modules").each(function(){if($(this).attr("data-id")=="")$(this).addClass("disabled")})},moduleColor:function(a){switch(a){case"amethyst":return"info";case"topaz":return"warning";case"emerald":return"success";case"ruby":return"danger";case"sapphire":return"primary";default:return"secondary"}}},computed:{dataTable:function(){return this.$refs.tenantsTable.dataTable},paymentsModal:function(){return this.$refs.paymentsModal},paymentsTable:function(){return this.$refs.paymentsTable}}});loadComponents(a,"datatable_with_modal");var s=a.mount("#app");$("body").on("click","#tenants-table .payments",function(){var t=$(this);s.paymentsModal.show(function(){var a=s.dataTable.row(t.closest("tr")).data();s.openUser={id:a["id"],name:a["name"]};s.$nextTick(function(){s.paymentsTable.init()})})}).on("click","#tenants-table .modules",function(){if($(this).hasClass("disabled"))return;var a=$(this).closest("tr");var t=s.dataTable.row(a);if(t.child.isShown())t.child.hide();else{var n=$(this).attr("data-id");var e=$("<tr/>").append('<td class="bg-sky-10"><strong>'+locale.common.modules+'</strong></td><td class="bg-sky-10" colspan="'+(a.find("td").length-1)+'" data-subscription-id="'+n+'"><i class="fas fa-spin fa-spinner"></i></td>');t.child(e).show();$.ajax({url:window.baseUrl+"/subscriptions/"+n+"/modules",type:"GET",success:function(a){var t=$('[data-subscription-id="'+n+'"]'),e;t.empty();a.modules.forEach(function(a){e=s.moduleColor(a);t.append('<div class="badge badge-'+e+'">'+a+"</div> ")})}})}})})();